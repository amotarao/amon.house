{"version":3,"file":"pages/posts/index.js","sources":["webpack:///./src/components/molecules/PostCard.vue?a996","webpack:///./src/utils/date.ts","webpack:///./src/components/molecules/PostCard.vue?8149","webpack:///./src/components/molecules/PostCard.vue?b585","webpack:///./src/components/pages/PostListPage.vue?2520","webpack:///./src/components/molecules/PostCard.vue?bacb","webpack:///./src/components/molecules/PostCard.vue?7be2","webpack:///./src/components/molecules/PostCard.vue?0bea","webpack:///./src/components/molecules/PostCard.vue","webpack:///./src/components/pages/PostListPage.vue?3a8e","webpack:///./src/components/pages/PostListPage.vue?59ce","webpack:///./src/pages/posts/index.vue?1aec","webpack:///./src/components/pages/PostListPage.vue?aa4b","webpack:///./src/components/pages/PostListPage.vue?838f","webpack:///./src/components/pages/PostListPage.vue?2dbd","webpack:///./src/components/pages/PostListPage.vue","webpack:///./src/pages/posts/index.vue?3d9b","webpack:///./src/pages/posts/index.vue?bdfb","webpack:///./src/pages/posts/index.vue"],"sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-0-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--7-oneOf-0-4!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostCard.vue?vue&type=style&index=0&lang=scss&module=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"96ec2212\", content, true, context)\n};","export const formatDate = (date: Date): string => {\n  const y = date.getFullYear();\n  const m = date.getMonth() + 1;\n  const d = date.getDate();\n\n  const h = date.getHours();\n  const min = `0${date.getMinutes()}`.slice(-2);\n\n  return `${y}.${m}.${d} ${h}:${min}`;\n};\n","import mod from \"-!../../../node_modules/vue-style-loader/index.js??ref--7-oneOf-0-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-0-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--7-oneOf-0-4!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostCard.vue?vue&type=style&index=0&lang=scss&module=true&\"; export default mod; export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--7-oneOf-0-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-0-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--7-oneOf-0-4!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostCard.vue?vue&type=style&index=0&lang=scss&module=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._2et6P{border-radius:8px;box-shadow:0 2px 4px 0 var(--shadow-color);color:inherit;display:block;overflow:hidden;text-decoration:none;height:100%;width:100%;transition:all .2s ease-out}._2et6P:hover{box-shadow:0 4px 8px 0 var(--shadow-color)}.M0sGm{position:relative;width:100%}.M0sGm:before{content:\\\"\\\";display:block;padding-top:60%}.M0sGm img{-o-object-fit:cover;object-fit:cover;position:absolute;top:0;left:0;bottom:0;right:0;height:100%;width:100%}.eOi3W{color:var(--sub-color);font-size:.8rem;line-height:1.5;padding:.5rem 1rem}.eOi3W,._3Tzkp{text-align:left}._3Tzkp{padding:0 1rem 1rem;font-size:1rem}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"card\": \"_2et6P\",\n\t\"thumbnail\": \"M0sGm\",\n\t\"date\": \"eOi3W\",\n\t\"title\": \"_3Tzkp\"\n};\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-0-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--7-oneOf-0-4!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostListPage.vue?vue&type=style&index=0&lang=scss&module=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"32f8487a\", content, true, context)\n};","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('nuxt-link',{class:_vm.$style.card,attrs:{\"to\":(\"/posts/\" + _vm.id)}},[_c('div',{class:_vm.$style.thumbnail},[_c('img',{attrs:{\"src\":_vm.computedThumbnail,\"alt\":(_vm.title + \"のサムネイル\")}})]),_vm._v(\" \"),_c('p',{class:_vm.$style.date},[_c('time',{attrs:{\"datetime\":_vm.updatedAtDate.toISOString()}},[_vm._v(_vm._s(_vm.updatedAtStr))]),_vm._v(\" 更新\\n  \")]),_vm._v(\" \"),_c('p',{class:_vm.$style.title},[_vm._v(_vm._s(_vm.title))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\nimport Vue, { PropOptions } from 'vue';\nimport { formatDate } from '@/utils/date';\n\nexport default Vue.extend({\n  props: {\n    id: {\n      type: String,\n      required: true,\n    },\n    title: {\n      type: String,\n      required: true,\n    },\n    thumbnail: {\n      type: Object,\n      default: null,\n    } as PropOptions<{ url: string } | null>,\n    updatedAt: {\n      type: String,\n      required: true,\n    },\n  },\n  computed: {\n    computedThumbnail(): string {\n      const encodedTitle = encodeURIComponent(this.title);\n\n      if (this.thumbnail !== null) {\n        return `${this.thumbnail.url}?w=450&h=300&fit=crop`;\n      }\n      return `https://i.imgg.app/amon/amon-house/jpg?title=${encodedTitle}`;\n    },\n    updatedAtDate(): Date {\n      return new Date(this.updatedAt);\n    },\n    updatedAtStr(): string {\n      return formatDate(this.updatedAtDate);\n    },\n  },\n});\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--12-0!../../../node_modules/ts-loader/index.js??ref--12-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostCard.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--12-0!../../../node_modules/ts-loader/index.js??ref--12-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostCard.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PostCard.vue?vue&type=template&id=a4c552fe&\"\nimport script from \"./PostCard.vue?vue&type=script&lang=ts&\"\nexport * from \"./PostCard.vue?vue&type=script&lang=ts&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./PostCard.vue?vue&type=style&index=0&lang=scss&module=true&\")\nif (style0.__inject__) style0.__inject__(context)\nthis[\"$style\"] = (style0.locals || style0)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"537dfdc5\"\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/vue-style-loader/index.js??ref--7-oneOf-0-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-0-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--7-oneOf-0-4!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostListPage.vue?vue&type=style&index=0&lang=scss&module=true&\"; export default mod; export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--7-oneOf-0-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-0-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--7-oneOf-0-4!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostListPage.vue?vue&type=style&index=0&lang=scss&module=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".BVJL_{margin:auto;padding:120px 16px;max-width:100%;width:752px}._2YbqF{font-size:2rem;margin-bottom:2rem}._30Bv9{margin:0 auto 2rem;width:720px;max-width:100%;list-style:none;display:grid;justify-content:center;grid-template-columns:repeat(auto-fit,minmax(224px,1fr));grid-gap:1rem}._1I1s9{margin:auto;height:100%;width:100%}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"wrapper\": \"BVJL_\",\n\t\"title\": \"_2YbqF\",\n\t\"postList\": \"_30Bv9\",\n\t\"postItem\": \"_1I1s9\"\n};\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('post-list-page',{attrs:{\"posts\":_vm.posts}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.$style.wrapper},[_vm._ssrNode(\"<h1\"+(_vm._ssrClass(null,_vm.$style.title))+\">記事一覧</h1> \"),_vm._ssrNode(\"<ul\"+(_vm._ssrClass(null,_vm.$style.postList))+\">\",\"</ul>\",_vm._l((_vm.posts),function(item,i){return _vm._ssrNode(\"<li\"+(_vm._ssrClass(null,_vm.$style.postItem))+\">\",\"</li>\",[_c('post-card',_vm._b({},'post-card',item,false))],1)}),0)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\nimport Vue, { PropOptions } from 'vue';\nimport { Post } from '@/pages/posts/_id.vue';\nimport PostCard from '@/components/molecules/PostCard.vue';\n\nexport default Vue.extend({\n  components: {\n    PostCard,\n  },\n  props: {\n    posts: {\n      type: Array,\n      required: true,\n    } as PropOptions<Post[]>,\n  },\n});\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--12-0!../../../node_modules/ts-loader/index.js??ref--12-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostListPage.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--12-0!../../../node_modules/ts-loader/index.js??ref--12-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostListPage.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PostListPage.vue?vue&type=template&id=44265d28&\"\nimport script from \"./PostListPage.vue?vue&type=script&lang=ts&\"\nexport * from \"./PostListPage.vue?vue&type=script&lang=ts&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./PostListPage.vue?vue&type=style&index=0&lang=scss&module=true&\")\nif (style0.__inject__) style0.__inject__(context)\nthis[\"$style\"] = (style0.locals || style0)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"ba90296a\"\n  \n)\n\nexport default component.exports","\n\n\n\n\nimport Vue from 'vue';\nimport { AxiosError } from 'axios';\nimport PostListPage from '@/components/pages/PostListPage.vue';\nimport { Post } from '@/pages/posts/_id.vue';\n\ntype PickedPost = Pick<Post, 'id' | 'title' | 'thumbnail' | 'updatedAt'>;\n\nexport default Vue.extend({\n  components: {\n    PostListPage,\n  },\n  async asyncData({ $axios, query, error }): Promise<{ posts: PickedPost[] } | void> {\n    const q = {\n      draftKey: typeof query.draftKey === 'string' ? query.draftKey : null,\n      limit: 20,\n      fields: ['id', 'title', 'thumbnail', 'updatedAt'].join(','),\n    };\n    const qs = Object.entries(q)\n      .filter((q): q is [string, string] => q[1] !== null)\n      .map(([key, value]) => `${key}=${encodeURIComponent(value)}`)\n      .join('&');\n\n    const url = `https://api.amon.house/v1/posts?${qs}`;\n\n    const response = await $axios.get<{ contents: PickedPost[] }>(url).catch((error: AxiosError) => {\n      if (error.response) {\n        return { data: null, status: error.response.status };\n      }\n      return { data: null, status: 500 };\n    });\n\n    if (response.data === null) {\n      error({ statusCode: response.status, message: '' });\n      return;\n    }\n\n    return { posts: response.data.contents };\n  },\n  computed: {\n    canonicalUrl(): string {\n      return `https://amon.house/posts`;\n    },\n  },\n  head() {\n    const canonicalUrl = (this as any).canonicalUrl as string;\n\n    return {\n      title: '記事一覧',\n      link: [{ hid: 'canonical', rel: 'canonical', href: canonicalUrl }],\n    };\n  },\n});\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--12-0!../../../node_modules/ts-loader/index.js??ref--12-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--12-0!../../../node_modules/ts-loader/index.js??ref--12-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4bdff978&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"4bd8dc36\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACVA;AAAA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;;;;;;;;ACTA;AAAA;AAAA;AAAA;AAAA;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACVA;AACA;AACA;;;;;;;;;;;;ACSA;AACA;AAEA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAbA;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAfA;AAnBA;;ACdA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACxBA;AAAA;AAAA;AAAA;AAAA;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACZA;AACA;AACA;;;;;;;;;ACFA;AACA;AACA;;;;;;;;ACUA;AAEA;AAEA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAFA;AADA;AAJA;;AChBA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AAEA;AAKA;AACA;AACA;AADA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAKA;AAKA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAJA;AACA;AAIA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAFA;AAIA;AACA;AA5CA;;ACZA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}