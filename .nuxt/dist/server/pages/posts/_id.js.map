{"version":3,"file":"pages/posts/_id.js","sources":["webpack:///./src/utils/date.ts","webpack:///./src/components/pages/PostPage.vue?9489","webpack:///./src/components/pages/PostPage.vue?9db8","webpack:///./src/components/pages/PostPage.vue?edd5","webpack:///./src/pages/posts/_id.vue?5ac7","webpack:///./src/components/pages/PostPage.vue?8a67","webpack:///./src/components/pages/PostPage.vue?30a0","webpack:///./src/components/pages/PostPage.vue?31e4","webpack:///./src/components/pages/PostPage.vue","webpack:///./src/pages/posts/_id.vue?7932","webpack:///./src/pages/posts/_id.vue?a22d","webpack:///./src/pages/posts/_id.vue"],"sourcesContent":["export const formatDate = (date: Date): string => {\n  const y = date.getFullYear();\n  const m = date.getMonth() + 1;\n  const d = date.getDate();\n\n  const h = date.getHours();\n  const min = `0${date.getMinutes()}`.slice(-2);\n\n  return `${y}.${m}.${d} ${h}:${min}`;\n};\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-0-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--7-oneOf-0-4!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostPage.vue?vue&type=style&index=0&lang=scss&module=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"c029df04\", content, true, context)\n};","import mod from \"-!../../../node_modules/vue-style-loader/index.js??ref--7-oneOf-0-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-0-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--7-oneOf-0-4!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostPage.vue?vue&type=style&index=0&lang=scss&module=true&\"; export default mod; export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--7-oneOf-0-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-0-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-0-2!../../../node_modules/sass-loader/dist/cjs.js??ref--7-oneOf-0-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--7-oneOf-0-4!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostPage.vue?vue&type=style&index=0&lang=scss&module=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._1iNOr{margin:auto;padding:120px 16px;max-width:100%;width:640px}._3NtUv{font-size:2rem;margin-bottom:2rem}.Y1cTa{display:flex;flex-wrap:wrap;color:var(--sub-color);font-size:.9rem;line-height:1.5;margin-bottom:4rem}.Y1cTa span{display:block}._2fS-7{margin:0 .5em}._2CUk4{font-size:1rem;line-height:1.7}._2CUk4>*+*{margin-top:24px}._2CUk4 a{color:inherit}._2CUk4 a[target=_blank]:after{background:var(--text-color);-webkit-mask-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M19 19H5V5h7V3H5a2 2 0 00-2 2v14a2 2 0 002 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z'/%3E%3C/svg%3E\\\");mask-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M19 19H5V5h7V3H5a2 2 0 00-2 2v14a2 2 0 002 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z'/%3E%3C/svg%3E\\\");-webkit-mask-size:contain;mask-size:contain;-webkit-mask-position:center;mask-position:center;content:\\\"\\\";display:inline-block;width:1em;height:1em;margin-left:.1em;transform:translateY(.125em)}._2CUk4 img{max-width:100%;height:auto}._2e3jw{margin-top:4rem;display:flex}._1wlTm{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:none;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;background:var(--bg2-color);border-radius:4px;color:var(--text-color);height:48px;width:48px;margin-right:1rem}._1wlTm[aria-disabled=true]{cursor:not-allowed}._1wlTm svg{fill:currentColor}._1wlTm[data-type=twitter]{background:#1da1f2}._1wlTm[data-type=twitter] svg{fill:#fff;height:30px;width:30px}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"wrapper\": \"_1iNOr\",\n\t\"title\": \"_3NtUv\",\n\t\"date\": \"Y1cTa\",\n\t\"separator\": \"_2fS-7\",\n\t\"contents\": \"_2CUk4\",\n\t\"footer\": \"_2e3jw\",\n\t\"share\": \"_1wlTm\"\n};\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('post-page',_vm._b({attrs:{\"url\":_vm.canonicalUrl}},'post-page',_vm.postData,false))}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{class:_vm.$style.wrapper},[_vm._ssrNode(\"<h1\"+(_vm._ssrClass(null,_vm.$style.title))+\">\"+_vm._ssrEscape(_vm._s(_vm.title))+\"</h1> <div\"+(_vm._ssrClass(null,_vm.$style.date))+\"><span><time\"+(_vm._ssrAttr(\"datetime\",_vm.createdAt.toISOString()))+\">\"+_vm._ssrEscape(_vm._s(_vm.createdAtStr)+\" 投稿\")+\"</time></span> \"+((_vm.isUpdated)?(\"<span\"+(_vm._ssrClass(null,_vm.$style.separator))+\">/</span> <span><time\"+(_vm._ssrAttr(\"datetime\",_vm.updatedAt.toISOString()))+\">\"+_vm._ssrEscape(_vm._s(_vm.updatedAtStr)+\" 更新\")+\"</time></span>\"):\"<!---->\")+\"</div> <section\"+(_vm._ssrClass(null,_vm.$style.contents))+\">\"+(_vm._s(_vm.body))+\"</section> <footer\"+(_vm._ssrClass(null,_vm.$style.footer))+\"><a\"+(_vm._ssrAttr(\"href\",_vm.tweetUrl))+\" target=\\\"_blank\\\" rel=\\\"noopener\\\" aria-label=\\\"ツイートする\\\" data-type=\\\"twitter\\\"\"+(_vm._ssrClass(null,_vm.$style.share))+\"><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" height=\\\"400\\\" width=\\\"400\\\" viewBox=\\\"0 0 400 400\\\"><path fill=\\\"none\\\" d=\\\"M0 0h400v400H0z\\\"></path> <path d=\\\"M153.62 301.59c94.34 0 145.94-78.16 145.94-145.94 0-2.22 0-4.43-.15-6.63A104.36 104.36 0 00325 122.47a102.38 102.38 0 01-29.46 8.07 51.47 51.47 0 0022.55-28.37 102.79 102.79 0 01-32.57 12.45 51.34 51.34 0 00-87.41 46.78A145.62 145.62 0 0192.4 107.81a51.33 51.33 0 0015.88 68.47A50.91 50.91 0 0185 169.86v.65a51.31 51.31 0 0041.15 50.28 51.21 51.21 0 01-23.16.88 51.35 51.35 0 0047.92 35.62 102.92 102.92 0 01-63.7 22 104.41 104.41 0 01-12.21-.74 145.21 145.21 0 0078.62 23\\\"></path></svg></a> \"+((_vm.isSupportedShare)?(\"<button aria-label=\\\"シェアする\\\" data-type=\\\"shareapi\\\"\"+(_vm._ssrClass(null,_vm.$style.share))+\"><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" height=\\\"24\\\" width=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M0 0h24v24H0z\\\" fill=\\\"none\\\"></path> <path d=\\\"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z\\\"></path></svg></button>\"):\"<!---->\")+\"</footer>\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue, { PropOptions } from 'vue';\nimport { formatDate } from '@/utils/date';\n\nexport default Vue.extend({\n  inheritAttrs: false,\n  props: {\n    title: {\n      type: String,\n      required: true,\n    },\n    introduction: {\n      type: String,\n      required: true,\n    },\n    body: {\n      type: String,\n      required: true,\n    },\n    createdAt: {\n      type: Date,\n      required: true,\n    } as PropOptions<Date>,\n    updatedAt: {\n      type: Date,\n      required: true,\n    } as PropOptions<Date>,\n    url: {\n      type: String,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      isSupportedShare: false,\n    };\n  },\n  computed: {\n    createdAtStr(): string {\n      return formatDate(this.createdAt);\n    },\n    updatedAtStr(): string {\n      return formatDate(this.updatedAt);\n    },\n    isUpdated(): Boolean {\n      return this.createdAtStr !== this.updatedAtStr;\n    },\n    tweetUrl(): string {\n      const url = encodeURIComponent(this.url);\n      return `https://twitter.com/intent/tweet?url=${url}&via=amotarao`;\n    },\n  },\n  mounted() {\n    this.isSupportedShare = 'share' in window.navigator;\n  },\n  methods: {\n    async share() {\n      await (window.navigator as any).share({\n        title: this.title,\n        url: this.url,\n      });\n    },\n  },\n});\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--12-0!../../../node_modules/ts-loader/index.js??ref--12-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostPage.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--12-0!../../../node_modules/ts-loader/index.js??ref--12-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostPage.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PostPage.vue?vue&type=template&id=1a61f126&\"\nimport script from \"./PostPage.vue?vue&type=script&lang=ts&\"\nexport * from \"./PostPage.vue?vue&type=script&lang=ts&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./PostPage.vue?vue&type=style&index=0&lang=scss&module=true&\")\nif (style0.__inject__) style0.__inject__(context)\nthis[\"$style\"] = (style0.locals || style0)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"d4c490e6\"\n  \n)\n\nexport default component.exports","\n\n\n\n\nimport Vue from 'vue';\nimport { AxiosError } from 'axios';\nimport PostPage from '@/components/pages/PostPage.vue';\n\nexport type Post = {\n  title: string;\n  introduction: string;\n  body: string;\n  thumbnail?: {\n    url: string;\n  };\n  id: string;\n  createdAt: string;\n  updatedAt: string;\n};\n\ntype PostData = {\n  id: string;\n  title: string;\n  introduction: string;\n  body: string;\n  thumbnail: string | null;\n  createdAt: Date;\n  updatedAt: Date;\n};\n\nexport default Vue.extend({\n  components: {\n    PostPage,\n  },\n  async asyncData({ $axios, params, query, error }): Promise<{ post: Post } | void> {\n    const q = {\n      draftKey: typeof query.draftKey === 'string' ? query.draftKey : null,\n    };\n    const qs = Object.entries(q)\n      .filter((q): q is [string, string] => q[1] !== null)\n      .map(([key, value]) => `${key}=${encodeURIComponent(value)}`)\n      .join('&');\n\n    const url = `https://api.amon.house/v1/posts/${params.id}?${qs}`;\n\n    const response = await $axios.get<Post>(url).catch((error: AxiosError) => {\n      if (error.response) {\n        return { data: null, status: error.response.status };\n      }\n      return { data: null, status: 500 };\n    });\n\n    if (response.data === null) {\n      error({ statusCode: response.status, message: '' });\n      return;\n    }\n\n    return { post: response.data };\n  },\n  computed: {\n    postData(): PostData {\n      const post = (this as any).post as Post;\n\n      return {\n        id: post.id,\n        title: post.title,\n        introduction: post.introduction,\n        body: post.body,\n        thumbnail: 'thumbnail' in post && post.thumbnail ? post.thumbnail.url : null,\n        createdAt: new Date(post.createdAt),\n        updatedAt: new Date(post.updatedAt),\n      };\n    },\n    canonicalUrl(): string {\n      return `https://amon.house/posts/${this.$route.params.id}`;\n    },\n  },\n  head() {\n    const postData = (this as any).postData as PostData;\n    const canonicalUrl = (this as any).canonicalUrl as string;\n    const encodedTitle = encodeURIComponent(postData.title);\n    const thumbnail = postData.thumbnail\n      ? `${postData.thumbnail}?w=1200&h=630&fit=crop`\n      : `https://i.imgg.app/amon/amon-house/jpg?title=${encodedTitle}`;\n\n    return {\n      title: postData.title,\n      link: [{ hid: 'canonical', rel: 'canonical', href: canonicalUrl }],\n      meta: [\n        { hid: 'og:type', property: 'og:type', content: 'article' },\n        { hid: 'og:url', property: 'og:url', content: canonicalUrl },\n        { hid: 'og:title', property: 'og:title', content: postData.title },\n        { hid: 'og:description', property: 'og:description', content: postData.introduction },\n        { hid: 'og:image', property: 'og:image', content: thumbnail },\n        { hid: 'og:image:width', property: 'og:image:width', content: '1200' },\n        { hid: 'og:image:height', property: 'og:image:height', content: '630' },\n        { hid: 'twitter:card', name: 'twitter:card', content: 'summary_large_image' },\n      ],\n      __dangerouslyDisableSanitizersByTagID: {\n        'og:image': ['content'],\n      },\n    };\n  },\n});\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--12-0!../../../node_modules/ts-loader/index.js??ref--12-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--12-0!../../../node_modules/ts-loader/index.js??ref--12-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./_id.vue?vue&type=template&id=6c3cac5f&\"\nimport script from \"./_id.vue?vue&type=script&lang=ts&\"\nexport * from \"./_id.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"06926ce6\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACVA;AAAA;AAAA;AAAA;AAAA;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACfA;AACA;AACA;;;;;;;;;ACFA;AACA;AACA;;;;;;;;AC2CA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AArBA;AACA;AAyBA;AACA;AACA;AADA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAdA;AACA;AAcA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAPA;AAnDA;;AChDA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AAEA;AAwBA;AACA;AACA;AADA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AADA;AAGA;AAKA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AAAA;AACA;AACA;AACA;AAjBA;AACA;AAiBA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AADA;AAbA;AAiBA;AACA;AAzEA;;AC/BA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}